{"dependencies":[{"name":"./supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":38,"index":38}}],"key":"nombsjMCzh8A1aWqTxUa62QcPc0=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.subscribeToMessages = subscribeToMessages;\n  exports.subscribeToNewPosts = subscribeToNewPosts;\n  exports.subscribeToNotifications = subscribeToNotifications;\n  var _supabase = require(_dependencyMap[0], \"./supabase\");\n  // Subscribe to new posts within a radius\n  function subscribeToNewPosts(callback) {\n    const channel = _supabase.supabase.channel('posts-channel').on('postgres_changes', {\n      event: 'INSERT',\n      schema: 'public',\n      table: 'posts'\n    }, payload => {\n      callback(payload.new);\n    }).subscribe();\n    return () => {\n      _supabase.supabase.removeChannel(channel);\n    };\n  }\n\n  // Subscribe to messages in a chat\n  function subscribeToMessages(chatId, callback) {\n    const channel = _supabase.supabase.channel(`messages-${chatId}`).on('postgres_changes', {\n      event: 'INSERT',\n      schema: 'public',\n      table: 'messages',\n      filter: `chat_id=eq.${chatId}`\n    }, payload => {\n      callback(payload.new);\n    }).subscribe();\n    return () => {\n      _supabase.supabase.removeChannel(channel);\n    };\n  }\n\n  // Subscribe to notifications for a user\n  function subscribeToNotifications(userId, callback) {\n    const channel = _supabase.supabase.channel(`notifications-${userId}`).on('postgres_changes', {\n      event: 'INSERT',\n      schema: 'public',\n      table: 'notifications',\n      filter: `user_id=eq.${userId}`\n    }, payload => {\n      callback(payload.new);\n    }).subscribe();\n    return () => {\n      _supabase.supabase.removeChannel(channel);\n    };\n  }\n});","lineCount":52,"map":[[8,2,1,0],[8,6,1,0,"_supabase"],[8,15,1,0],[8,18,1,0,"require"],[8,25,1,0],[8,26,1,0,"_dependencyMap"],[8,40,1,0],[9,2,3,0],[10,2,4,7],[10,11,4,16,"subscribeToNewPosts"],[10,30,4,35,"subscribeToNewPosts"],[10,31,4,36,"callback"],[10,39,4,44],[10,41,4,46],[11,4,5,2],[11,10,5,8,"channel"],[11,17,5,15],[11,20,5,18,"supabase"],[11,38,5,26],[11,39,6,5,"channel"],[11,46,6,12],[11,47,6,13],[11,62,6,28],[11,63,6,29],[11,64,7,5,"on"],[11,66,7,7],[11,67,8,6],[11,85,8,24],[11,87,9,6],[12,6,10,8,"event"],[12,11,10,13],[12,13,10,15],[12,21,10,23],[13,6,11,8,"schema"],[13,12,11,14],[13,14,11,16],[13,22,11,24],[14,6,12,8,"table"],[14,11,12,13],[14,13,12,15],[15,4,13,6],[15,5,13,7],[15,7,14,7,"payload"],[15,14,14,14],[15,18,14,19],[16,6,15,8,"callback"],[16,14,15,16],[16,15,15,17,"payload"],[16,22,15,24],[16,23,15,25,"new"],[16,26,15,28],[16,27,15,29],[17,4,16,6],[17,5,17,4],[17,6,17,5],[17,7,18,5,"subscribe"],[17,16,18,14],[17,17,18,15],[17,18,18,16],[18,4,20,2],[18,11,20,9],[18,17,20,15],[19,6,21,4,"supabase"],[19,24,21,12],[19,25,21,13,"removeChannel"],[19,38,21,26],[19,39,21,27,"channel"],[19,46,21,34],[19,47,21,35],[20,4,22,2],[20,5,22,3],[21,2,23,0],[23,2,25,0],[24,2,26,7],[24,11,26,16,"subscribeToMessages"],[24,30,26,35,"subscribeToMessages"],[24,31,26,36,"chatId"],[24,37,26,42],[24,39,26,44,"callback"],[24,47,26,52],[24,49,26,54],[25,4,27,2],[25,10,27,8,"channel"],[25,17,27,15],[25,20,27,18,"supabase"],[25,38,27,26],[25,39,28,5,"channel"],[25,46,28,12],[25,47,28,13],[25,59,28,25,"chatId"],[25,65,28,31],[25,67,28,33],[25,68,28,34],[25,69,29,5,"on"],[25,71,29,7],[25,72,30,6],[25,90,30,24],[25,92,31,6],[26,6,32,8,"event"],[26,11,32,13],[26,13,32,15],[26,21,32,23],[27,6,33,8,"schema"],[27,12,33,14],[27,14,33,16],[27,22,33,24],[28,6,34,8,"table"],[28,11,34,13],[28,13,34,15],[28,23,34,25],[29,6,35,8,"filter"],[29,12,35,14],[29,14,35,16],[29,28,35,30,"chatId"],[29,34,35,36],[30,4,36,6],[30,5,36,7],[30,7,37,7,"payload"],[30,14,37,14],[30,18,37,19],[31,6,38,8,"callback"],[31,14,38,16],[31,15,38,17,"payload"],[31,22,38,24],[31,23,38,25,"new"],[31,26,38,28],[31,27,38,29],[32,4,39,6],[32,5,40,4],[32,6,40,5],[32,7,41,5,"subscribe"],[32,16,41,14],[32,17,41,15],[32,18,41,16],[33,4,43,2],[33,11,43,9],[33,17,43,15],[34,6,44,4,"supabase"],[34,24,44,12],[34,25,44,13,"removeChannel"],[34,38,44,26],[34,39,44,27,"channel"],[34,46,44,34],[34,47,44,35],[35,4,45,2],[35,5,45,3],[36,2,46,0],[38,2,48,0],[39,2,49,7],[39,11,49,16,"subscribeToNotifications"],[39,35,49,40,"subscribeToNotifications"],[39,36,49,41,"userId"],[39,42,49,47],[39,44,49,49,"callback"],[39,52,49,57],[39,54,49,59],[40,4,50,2],[40,10,50,8,"channel"],[40,17,50,15],[40,20,50,18,"supabase"],[40,38,50,26],[40,39,51,5,"channel"],[40,46,51,12],[40,47,51,13],[40,64,51,30,"userId"],[40,70,51,36],[40,72,51,38],[40,73,51,39],[40,74,52,5,"on"],[40,76,52,7],[40,77,53,6],[40,95,53,24],[40,97,54,6],[41,6,55,8,"event"],[41,11,55,13],[41,13,55,15],[41,21,55,23],[42,6,56,8,"schema"],[42,12,56,14],[42,14,56,16],[42,22,56,24],[43,6,57,8,"table"],[43,11,57,13],[43,13,57,15],[43,28,57,30],[44,6,58,8,"filter"],[44,12,58,14],[44,14,58,16],[44,28,58,30,"userId"],[44,34,58,36],[45,4,59,6],[45,5,59,7],[45,7,60,7,"payload"],[45,14,60,14],[45,18,60,19],[46,6,61,8,"callback"],[46,14,61,16],[46,15,61,17,"payload"],[46,22,61,24],[46,23,61,25,"new"],[46,26,61,28],[46,27,61,29],[47,4,62,6],[47,5,63,4],[47,6,63,5],[47,7,64,5,"subscribe"],[47,16,64,14],[47,17,64,15],[47,18,64,16],[48,4,66,2],[48,11,66,9],[48,17,66,15],[49,6,67,4,"supabase"],[49,24,67,12],[49,25,67,13,"removeChannel"],[49,38,67,26],[49,39,67,27,"channel"],[49,46,67,34],[49,47,67,35],[50,4,68,2],[50,5,68,3],[51,2,69,0],[52,0,69,1],[52,3]],"functionMap":{"names":["<global>","subscribeToNewPosts","supabase.channel.on$argument_2","<anonymous>","subscribeToMessages","subscribeToNotifications"],"mappings":"AAA;OCG;MCU;ODE;SEI;GFE;CDC;OIG;MFW;OEE;SDI;GCE;CJC;OKG;MHW;OGE;SFI;GEE;CLC"}},"type":"js/module"}]}