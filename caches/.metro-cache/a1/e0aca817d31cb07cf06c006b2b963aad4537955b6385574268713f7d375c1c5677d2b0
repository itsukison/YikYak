{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"../supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":39,"index":118}}],"key":"zx/dTdJp0d3TJEOaa003L7FI5PE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useChatsQuery = useChatsQuery;\n  exports.useChatMessagesQuery = useChatMessagesQuery;\n  exports.useSendMessageMutation = useSendMessageMutation;\n  exports.useCreateChatMutation = useCreateChatMutation;\n  exports.useMarkMessagesReadMutation = useMarkMessagesReadMutation;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _supabase = require(_dependencyMap[2], \"../supabase\");\n  /**\n   * Fetch all chats for the current user\n   */\n  function useChatsQuery(userId) {\n    _s();\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: [\"chats\", userId],\n      queryFn: function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          if (!userId) throw new Error(\"User ID required\");\n          var _yield$supabase$from$ = yield _supabase.supabase.from(\"chats\").select(`\n          *,\n          user1:users!chats_user1_id_fkey(id, nickname, is_anonymous),\n          user2:users!chats_user2_id_fkey(id, nickname, is_anonymous),\n          messages(content, created_at, is_read, sender_id)\n        `).or(`user1_id.eq.${userId},user2_id.eq.${userId}`).order(\"updated_at\", {\n              ascending: false\n            }),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n\n          // Transform data to include other user and last message\n          return data.map(chat => {\n            var otherUser = chat.user1.id === userId ? chat.user2 : chat.user1;\n            var messages = chat.messages || [];\n            var lastMessage = messages.length > 0 ? messages[messages.length - 1] : null;\n            var unreadCount = messages.filter(msg => !msg.is_read && msg.sender_id !== userId).length;\n            return {\n              ...chat,\n              otherUser,\n              lastMessage,\n              unreadCount\n            };\n          });\n        });\n        return function queryFn() {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      enabled: !!userId\n    });\n  }\n\n  /**\n   * Fetch messages for a specific chat\n   */\n  _s(useChatsQuery, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n    return [_tanstackReactQuery.useQuery];\n  });\n  function useChatMessagesQuery(chatId) {\n    _s2();\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: [\"messages\", chatId],\n      queryFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* () {\n          if (!chatId) throw new Error(\"Chat ID required\");\n          var _yield$supabase$from$2 = yield _supabase.supabase.from(\"messages\").select(`\n          *,\n          sender:users!messages_sender_id_fkey(id, nickname, is_anonymous)\n        `).eq(\"chat_id\", chatId).order(\"created_at\", {\n              ascending: true\n            }),\n            data = _yield$supabase$from$2.data,\n            error = _yield$supabase$from$2.error;\n          if (error) throw error;\n          return data;\n        });\n        return function queryFn() {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      enabled: !!chatId\n    });\n  }\n\n  /**\n   * Send a new message\n   */\n  _s2(useChatMessagesQuery, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n    return [_tanstackReactQuery.useQuery];\n  });\n  function useSendMessageMutation() {\n    _s3();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref4 = (0, _asyncToGenerator.default)(function* (_ref3) {\n          var chatId = _ref3.chatId,\n            senderId = _ref3.senderId,\n            content = _ref3.content;\n          var _yield$supabase$from$3 = yield _supabase.supabase.from(\"messages\").insert({\n              chat_id: chatId,\n              sender_id: senderId,\n              content: content.trim()\n            }).select().single(),\n            data = _yield$supabase$from$3.data,\n            error = _yield$supabase$from$3.error;\n          if (error) throw error;\n\n          // Update chat's updated_at timestamp\n          yield _supabase.supabase.from(\"chats\").update({\n            updated_at: new Date().toISOString()\n          }).eq(\"id\", chatId);\n          return data;\n        });\n        return function mutationFn(_x) {\n          return _ref4.apply(this, arguments);\n        };\n      }(),\n      onSuccess: (data, variables) => {\n        // Invalidate messages query to refetch\n        queryClient.invalidateQueries([\"messages\", variables.chatId]);\n        // Invalidate chats query to update last message\n        queryClient.invalidateQueries([\"chats\"]);\n      }\n    });\n  }\n\n  /**\n   * Create a new chat with another user\n   */\n  _s3(useSendMessageMutation, \"YK0wzM21ECnncaq5SECwU+/SVdQ=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _tanstackReactQuery.useMutation];\n  });\n  function useCreateChatMutation() {\n    _s4();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref6 = (0, _asyncToGenerator.default)(function* (_ref5) {\n          var user1Id = _ref5.user1Id,\n            user2Id = _ref5.user2Id;\n          // Check if chat already exists\n          var _yield$supabase$from$4 = yield _supabase.supabase.from(\"chats\").select(\"*\").or(`and(user1_id.eq.${user1Id},user2_id.eq.${user2Id}),and(user1_id.eq.${user2Id},user2_id.eq.${user1Id})`).maybeSingle(),\n            existingChat = _yield$supabase$from$4.data,\n            checkError = _yield$supabase$from$4.error;\n          if (checkError) throw checkError;\n          if (existingChat) {\n            return existingChat;\n          }\n\n          // Create new chat\n          var _yield$supabase$from$5 = yield _supabase.supabase.from(\"chats\").insert({\n              user1_id: user1Id,\n              user2_id: user2Id\n            }).select().single(),\n            data = _yield$supabase$from$5.data,\n            error = _yield$supabase$from$5.error;\n          if (error) throw error;\n          return data;\n        });\n        return function mutationFn(_x2) {\n          return _ref6.apply(this, arguments);\n        };\n      }(),\n      onSuccess: () => {\n        queryClient.invalidateQueries([\"chats\"]);\n      }\n    });\n  }\n\n  /**\n   * Mark messages as read\n   */\n  _s4(useCreateChatMutation, \"YK0wzM21ECnncaq5SECwU+/SVdQ=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _tanstackReactQuery.useMutation];\n  });\n  function useMarkMessagesReadMutation() {\n    _s5();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref8 = (0, _asyncToGenerator.default)(function* (_ref7) {\n          var chatId = _ref7.chatId,\n            userId = _ref7.userId;\n          var _yield$supabase$from$6 = yield _supabase.supabase.from(\"messages\").update({\n              is_read: true\n            }).eq(\"chat_id\", chatId).neq(\"sender_id\", userId).eq(\"is_read\", false),\n            error = _yield$supabase$from$6.error;\n          if (error) throw error;\n        });\n        return function mutationFn(_x3) {\n          return _ref8.apply(this, arguments);\n        };\n      }(),\n      onSuccess: (_, variables) => {\n        queryClient.invalidateQueries([\"messages\", variables.chatId]);\n        queryClient.invalidateQueries([\"chats\"]);\n      }\n    });\n  }\n  _s5(useMarkMessagesReadMutation, \"YK0wzM21ECnncaq5SECwU+/SVdQ=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _tanstackReactQuery.useMutation];\n  });\n});","lineCount":221,"map":[[17,2,7,0,"exports"],[17,9,7,0],[17,10,7,0,"useChatsQuery"],[17,23,7,0],[17,26,7,0,"useChatsQuery"],[17,39,7,0],[18,2,53,0,"exports"],[18,9,53,0],[18,10,53,0,"useChatMessagesQuery"],[18,30,53,0],[18,33,53,0,"useChatMessagesQuery"],[18,53,53,0],[19,2,80,0,"exports"],[19,9,80,0],[19,10,80,0,"useSendMessageMutation"],[19,32,80,0],[19,35,80,0,"useSendMessageMutation"],[19,57,80,0],[20,2,117,0,"exports"],[20,9,117,0],[20,10,117,0,"useCreateChatMutation"],[20,31,117,0],[20,34,117,0,"useCreateChatMutation"],[20,55,117,0],[21,2,159,0,"exports"],[21,9,159,0],[21,10,159,0,"useMarkMessagesReadMutation"],[21,37,159,0],[21,40,159,0,"useMarkMessagesReadMutation"],[21,67,159,0],[22,2,178,1],[22,6,178,1,"_babelRuntimeHelpersAsyncToGenerator"],[22,42,178,1],[22,45,178,1,"require"],[22,52,178,1],[22,53,178,1,"_dependencyMap"],[22,67,178,1],[23,2,178,1],[23,6,178,1,"_asyncToGenerator"],[23,23,178,1],[23,26,178,1,"_interopDefault"],[23,41,178,1],[23,42,178,1,"_babelRuntimeHelpersAsyncToGenerator"],[23,78,178,1],[24,2,1,0],[24,6,1,0,"_tanstackReactQuery"],[24,25,1,0],[24,28,1,0,"require"],[24,35,1,0],[24,36,1,0,"_dependencyMap"],[24,50,1,0],[25,2,2,0],[25,6,2,0,"_supabase"],[25,15,2,0],[25,18,2,0,"require"],[25,25,2,0],[25,26,2,0,"_dependencyMap"],[25,40,2,0],[26,2,4,0],[27,0,5,0],[28,0,6,0],[29,2,7,7],[29,11,7,16,"useChatsQuery"],[29,24,7,29,"useChatsQuery"],[29,25,7,30,"userId"],[29,31,7,36],[29,33,7,38],[30,4,7,38,"_s"],[30,6,7,38],[31,4,8,2],[31,11,8,9],[31,15,8,9,"useQuery"],[31,34,8,17],[31,35,8,17,"useQuery"],[31,43,8,17],[31,45,8,18],[32,6,9,4,"queryKey"],[32,14,9,12],[32,16,9,14],[32,17,9,15],[32,24,9,22],[32,26,9,24,"userId"],[32,32,9,30],[32,33,9,31],[33,6,10,4,"queryFn"],[33,13,10,11],[34,8,10,11],[34,12,10,11,"_ref"],[34,16,10,11],[34,23,10,11,"_asyncToGenerator"],[34,40,10,11],[34,41,10,11,"default"],[34,48,10,11],[34,50,10,13],[34,63,10,25],[35,10,11,6],[35,14,11,10],[35,15,11,11,"userId"],[35,21,11,17],[35,23,11,19],[35,29,11,25],[35,33,11,29,"Error"],[35,38,11,34],[35,39,11,35],[35,57,11,53],[35,58,11,54],[36,10,13,6],[36,14,13,6,"_yield$supabase$from$"],[36,35,13,6],[36,44,13,36,"supabase"],[36,53,13,44],[36,54,13,44,"supabase"],[36,62,13,44],[36,63,14,9,"from"],[36,67,14,13],[36,68,14,14],[36,75,14,21],[36,76,14,22],[36,77,15,9,"select"],[36,83,15,15],[36,84,16,10],[37,0,17,0],[38,0,18,0],[39,0,19,0],[40,0,20,0],[41,0,21,0],[41,9,22,8],[41,10,22,9],[41,11,23,9,"or"],[41,13,23,11],[41,14,23,12],[41,29,23,27,"userId"],[41,35,23,33],[41,51,23,49,"userId"],[41,57,23,55],[41,59,23,57],[41,60,23,58],[41,61,24,9,"order"],[41,66,24,14],[41,67,24,15],[41,79,24,27],[41,81,24,29],[42,14,24,31,"ascending"],[42,23,24,40],[42,25,24,42],[43,12,24,48],[43,13,24,49],[43,14,24,50],[44,12,13,14,"data"],[44,16,13,18],[44,19,13,18,"_yield$supabase$from$"],[44,40,13,18],[44,41,13,14,"data"],[44,45,13,18],[45,12,13,20,"error"],[45,17,13,25],[45,20,13,25,"_yield$supabase$from$"],[45,41,13,25],[45,42,13,20,"error"],[45,47,13,25],[46,10,26,6],[46,14,26,10,"error"],[46,19,26,15],[46,21,26,17],[46,27,26,23,"error"],[46,32,26,28],[48,10,28,6],[49,10,29,6],[49,17,29,13,"data"],[49,21,29,17],[49,22,29,18,"map"],[49,25,29,21],[49,26,29,23,"chat"],[49,30,29,27],[49,34,29,32],[50,12,30,8],[50,16,30,14,"otherUser"],[50,25,30,23],[50,28,30,26,"chat"],[50,32,30,30],[50,33,30,31,"user1"],[50,38,30,36],[50,39,30,37,"id"],[50,41,30,39],[50,46,30,44,"userId"],[50,52,30,50],[50,55,30,53,"chat"],[50,59,30,57],[50,60,30,58,"user2"],[50,65,30,63],[50,68,30,66,"chat"],[50,72,30,70],[50,73,30,71,"user1"],[50,78,30,76],[51,12,31,8],[51,16,31,14,"messages"],[51,24,31,22],[51,27,31,25,"chat"],[51,31,31,29],[51,32,31,30,"messages"],[51,40,31,38],[51,44,31,42],[51,46,31,44],[52,12,32,8],[52,16,32,14,"lastMessage"],[52,27,32,25],[52,30,33,10,"messages"],[52,38,33,18],[52,39,33,19,"length"],[52,45,33,25],[52,48,33,28],[52,49,33,29],[52,52,33,32,"messages"],[52,60,33,40],[52,61,33,41,"messages"],[52,69,33,49],[52,70,33,50,"length"],[52,76,33,56],[52,79,33,59],[52,80,33,60],[52,81,33,61],[52,84,33,64],[52,88,33,68],[53,12,34,8],[53,16,34,14,"unreadCount"],[53,27,34,25],[53,30,34,28,"messages"],[53,38,34,36],[53,39,34,37,"filter"],[53,45,34,43],[53,46,35,11,"msg"],[53,49,35,14],[53,53,35,19],[53,54,35,20,"msg"],[53,57,35,23],[53,58,35,24,"is_read"],[53,65,35,31],[53,69,35,35,"msg"],[53,72,35,38],[53,73,35,39,"sender_id"],[53,82,35,48],[53,87,35,53,"userId"],[53,93,36,8],[53,94,36,9],[53,95,36,10,"length"],[53,101,36,16],[54,12,38,8],[54,19,38,15],[55,14,39,10],[55,17,39,13,"chat"],[55,21,39,17],[56,14,40,10,"otherUser"],[56,23,40,19],[57,14,41,10,"lastMessage"],[57,25,41,21],[58,14,42,10,"unreadCount"],[59,12,43,8],[59,13,43,9],[60,10,44,6],[60,11,44,7],[60,12,44,8],[61,8,45,4],[61,9,45,5],[62,8,45,5],[62,24,10,4,"queryFn"],[62,31,10,11,"queryFn"],[62,32,10,11],[63,10,10,11],[63,17,10,11,"_ref"],[63,21,10,11],[63,22,10,11,"apply"],[63,27,10,11],[63,34,10,11,"arguments"],[63,43,10,11],[64,8,10,11],[65,6,10,11],[65,9,45,5],[66,6,46,4,"enabled"],[66,13,46,11],[66,15,46,13],[66,16,46,14],[66,17,46,15,"userId"],[67,4,47,2],[67,5,47,3],[67,6,47,4],[68,2,48,0],[70,2,50,0],[71,0,51,0],[72,0,52,0],[73,2,50,0,"_s"],[73,4,50,0],[73,5,7,16,"useChatsQuery"],[73,18,7,29],[74,4,7,29],[74,12,8,9,"useQuery"],[74,31,8,17],[74,32,8,17,"useQuery"],[74,40,8,17],[75,2,8,17],[76,2,53,7],[76,11,53,16,"useChatMessagesQuery"],[76,31,53,36,"useChatMessagesQuery"],[76,32,53,37,"chatId"],[76,38,53,43],[76,40,53,45],[77,4,53,45,"_s2"],[77,7,53,45],[78,4,54,2],[78,11,54,9],[78,15,54,9,"useQuery"],[78,34,54,17],[78,35,54,17,"useQuery"],[78,43,54,17],[78,45,54,18],[79,6,55,4,"queryKey"],[79,14,55,12],[79,16,55,14],[79,17,55,15],[79,27,55,25],[79,29,55,27,"chatId"],[79,35,55,33],[79,36,55,34],[80,6,56,4,"queryFn"],[80,13,56,11],[81,8,56,11],[81,12,56,11,"_ref2"],[81,17,56,11],[81,24,56,11,"_asyncToGenerator"],[81,41,56,11],[81,42,56,11,"default"],[81,49,56,11],[81,51,56,13],[81,64,56,25],[82,10,57,6],[82,14,57,10],[82,15,57,11,"chatId"],[82,21,57,17],[82,23,57,19],[82,29,57,25],[82,33,57,29,"Error"],[82,38,57,34],[82,39,57,35],[82,57,57,53],[82,58,57,54],[83,10,59,6],[83,14,59,6,"_yield$supabase$from$2"],[83,36,59,6],[83,45,59,36,"supabase"],[83,54,59,44],[83,55,59,44,"supabase"],[83,63,59,44],[83,64,60,9,"from"],[83,68,60,13],[83,69,60,14],[83,79,60,24],[83,80,60,25],[83,81,61,9,"select"],[83,87,61,15],[83,88,62,10],[84,0,63,0],[85,0,64,0],[86,0,65,0],[86,9,66,8],[86,10,66,9],[86,11,67,9,"eq"],[86,13,67,11],[86,14,67,12],[86,23,67,21],[86,25,67,23,"chatId"],[86,31,67,29],[86,32,67,30],[86,33,68,9,"order"],[86,38,68,14],[86,39,68,15],[86,51,68,27],[86,53,68,29],[87,14,68,31,"ascending"],[87,23,68,40],[87,25,68,42],[88,12,68,47],[88,13,68,48],[88,14,68,49],[89,12,59,14,"data"],[89,16,59,18],[89,19,59,18,"_yield$supabase$from$2"],[89,41,59,18],[89,42,59,14,"data"],[89,46,59,18],[90,12,59,20,"error"],[90,17,59,25],[90,20,59,25,"_yield$supabase$from$2"],[90,42,59,25],[90,43,59,20,"error"],[90,48,59,25],[91,10,70,6],[91,14,70,10,"error"],[91,19,70,15],[91,21,70,17],[91,27,70,23,"error"],[91,32,70,28],[92,10,71,6],[92,17,71,13,"data"],[92,21,71,17],[93,8,72,4],[93,9,72,5],[94,8,72,5],[94,24,56,4,"queryFn"],[94,31,56,11,"queryFn"],[94,32,56,11],[95,10,56,11],[95,17,56,11,"_ref2"],[95,22,56,11],[95,23,56,11,"apply"],[95,28,56,11],[95,35,56,11,"arguments"],[95,44,56,11],[96,8,56,11],[97,6,56,11],[97,9,72,5],[98,6,73,4,"enabled"],[98,13,73,11],[98,15,73,13],[98,16,73,14],[98,17,73,15,"chatId"],[99,4,74,2],[99,5,74,3],[99,6,74,4],[100,2,75,0],[102,2,77,0],[103,0,78,0],[104,0,79,0],[105,2,77,0,"_s2"],[105,5,77,0],[105,6,53,16,"useChatMessagesQuery"],[105,26,53,36],[106,4,53,36],[106,12,54,9,"useQuery"],[106,31,54,17],[106,32,54,17,"useQuery"],[106,40,54,17],[107,2,54,17],[108,2,80,7],[108,11,80,16,"useSendMessageMutation"],[108,33,80,38,"useSendMessageMutation"],[108,34,80,38],[108,36,80,41],[109,4,80,41,"_s3"],[109,7,80,41],[110,4,81,2],[110,8,81,8,"queryClient"],[110,19,81,19],[110,22,81,22],[110,26,81,22,"useQueryClient"],[110,45,81,36],[110,46,81,36,"useQueryClient"],[110,60,81,36],[110,62,81,37],[110,63,81,38],[111,4,83,2],[111,11,83,9],[111,15,83,9,"useMutation"],[111,34,83,20],[111,35,83,20,"useMutation"],[111,46,83,20],[111,48,83,21],[112,6,84,4,"mutationFn"],[112,16,84,14],[113,8,84,14],[113,12,84,14,"_ref4"],[113,17,84,14],[113,24,84,14,"_asyncToGenerator"],[113,41,84,14],[113,42,84,14,"default"],[113,49,84,14],[113,51,84,16],[113,62,84,16,"_ref3"],[113,67,84,16],[113,69,84,57],[114,10,84,57],[114,14,84,25,"chatId"],[114,20,84,31],[114,23,84,31,"_ref3"],[114,28,84,31],[114,29,84,25,"chatId"],[114,35,84,31],[115,12,84,33,"senderId"],[115,20,84,41],[115,23,84,41,"_ref3"],[115,28,84,41],[115,29,84,33,"senderId"],[115,37,84,41],[116,12,84,43,"content"],[116,19,84,50],[116,22,84,50,"_ref3"],[116,27,84,50],[116,28,84,43,"content"],[116,35,84,50],[117,10,85,6],[117,14,85,6,"_yield$supabase$from$3"],[117,36,85,6],[117,45,85,36,"supabase"],[117,54,85,44],[117,55,85,44,"supabase"],[117,63,85,44],[117,64,86,9,"from"],[117,68,86,13],[117,69,86,14],[117,79,86,24],[117,80,86,25],[117,81,87,9,"insert"],[117,87,87,15],[117,88,87,16],[118,14,88,10,"chat_id"],[118,21,88,17],[118,23,88,19,"chatId"],[118,29,88,25],[119,14,89,10,"sender_id"],[119,23,89,19],[119,25,89,21,"senderId"],[119,33,89,29],[120,14,90,10,"content"],[120,21,90,17],[120,23,90,19,"content"],[120,30,90,26],[120,31,90,27,"trim"],[120,35,90,31],[120,36,90,32],[121,12,91,8],[121,13,91,9],[121,14,91,10],[121,15,92,9,"select"],[121,21,92,15],[121,22,92,16],[121,23,92,17],[121,24,93,9,"single"],[121,30,93,15],[121,31,93,16],[121,32,93,17],[122,12,85,14,"data"],[122,16,85,18],[122,19,85,18,"_yield$supabase$from$3"],[122,41,85,18],[122,42,85,14,"data"],[122,46,85,18],[123,12,85,20,"error"],[123,17,85,25],[123,20,85,25,"_yield$supabase$from$3"],[123,42,85,25],[123,43,85,20,"error"],[123,48,85,25],[124,10,95,6],[124,14,95,10,"error"],[124,19,95,15],[124,21,95,17],[124,27,95,23,"error"],[124,32,95,28],[126,10,97,6],[127,10,98,6],[127,16,98,12,"supabase"],[127,25,98,20],[127,26,98,20,"supabase"],[127,34,98,20],[127,35,99,9,"from"],[127,39,99,13],[127,40,99,14],[127,47,99,21],[127,48,99,22],[127,49,100,9,"update"],[127,55,100,15],[127,56,100,16],[128,12,100,18,"updated_at"],[128,22,100,28],[128,24,100,30],[128,28,100,34,"Date"],[128,32,100,38],[128,33,100,39],[128,34,100,40],[128,35,100,41,"toISOString"],[128,46,100,52],[128,47,100,53],[129,10,100,55],[129,11,100,56],[129,12,100,57],[129,13,101,9,"eq"],[129,15,101,11],[129,16,101,12],[129,20,101,16],[129,22,101,18,"chatId"],[129,28,101,24],[129,29,101,25],[130,10,103,6],[130,17,103,13,"data"],[130,21,103,17],[131,8,104,4],[131,9,104,5],[132,8,104,5],[132,24,84,4,"mutationFn"],[132,34,84,14,"mutationFn"],[132,35,84,14,"_x"],[132,37,84,14],[133,10,84,14],[133,17,84,14,"_ref4"],[133,22,84,14],[133,23,84,14,"apply"],[133,28,84,14],[133,35,84,14,"arguments"],[133,44,84,14],[134,8,84,14],[135,6,84,14],[135,9,104,5],[136,6,105,4,"onSuccess"],[136,15,105,13],[136,17,105,15,"onSuccess"],[136,18,105,16,"data"],[136,22,105,20],[136,24,105,22,"variables"],[136,33,105,31],[136,38,105,36],[137,8,106,6],[138,8,107,6,"queryClient"],[138,19,107,17],[138,20,107,18,"invalidateQueries"],[138,37,107,35],[138,38,107,36],[138,39,107,37],[138,49,107,47],[138,51,107,49,"variables"],[138,60,107,58],[138,61,107,59,"chatId"],[138,67,107,65],[138,68,107,66],[138,69,107,67],[139,8,108,6],[140,8,109,6,"queryClient"],[140,19,109,17],[140,20,109,18,"invalidateQueries"],[140,37,109,35],[140,38,109,36],[140,39,109,37],[140,46,109,44],[140,47,109,45],[140,48,109,46],[141,6,110,4],[142,4,111,2],[142,5,111,3],[142,6,111,4],[143,2,112,0],[145,2,114,0],[146,0,115,0],[147,0,116,0],[148,2,114,0,"_s3"],[148,5,114,0],[148,6,80,16,"useSendMessageMutation"],[148,28,80,38],[149,4,80,38],[149,12,81,22,"useQueryClient"],[149,31,81,36],[149,32,81,36,"useQueryClient"],[149,46,81,36],[149,48,83,9,"useMutation"],[149,67,83,20],[149,68,83,20,"useMutation"],[149,79,83,20],[150,2,83,20],[151,2,117,7],[151,11,117,16,"useCreateChatMutation"],[151,32,117,37,"useCreateChatMutation"],[151,33,117,37],[151,35,117,40],[152,4,117,40,"_s4"],[152,7,117,40],[153,4,118,2],[153,8,118,8,"queryClient"],[153,19,118,19],[153,22,118,22],[153,26,118,22,"useQueryClient"],[153,45,118,36],[153,46,118,36,"useQueryClient"],[153,60,118,36],[153,62,118,37],[153,63,118,38],[154,4,120,2],[154,11,120,9],[154,15,120,9,"useMutation"],[154,34,120,20],[154,35,120,20,"useMutation"],[154,46,120,20],[154,48,120,21],[155,6,121,4,"mutationFn"],[155,16,121,14],[156,8,121,14],[156,12,121,14,"_ref6"],[156,17,121,14],[156,24,121,14,"_asyncToGenerator"],[156,41,121,14],[156,42,121,14,"default"],[156,49,121,14],[156,51,121,16],[156,62,121,16,"_ref5"],[156,67,121,16],[156,69,121,48],[157,10,121,48],[157,14,121,25,"user1Id"],[157,21,121,32],[157,24,121,32,"_ref5"],[157,29,121,32],[157,30,121,25,"user1Id"],[157,37,121,32],[158,12,121,34,"user2Id"],[158,19,121,41],[158,22,121,41,"_ref5"],[158,27,121,41],[158,28,121,34,"user2Id"],[158,35,121,41],[159,10,122,6],[160,10,123,6],[160,14,123,6,"_yield$supabase$from$4"],[160,36,123,6],[160,45,123,62,"supabase"],[160,54,123,70],[160,55,123,70,"supabase"],[160,63,123,70],[160,64,124,9,"from"],[160,68,124,13],[160,69,124,14],[160,76,124,21],[160,77,124,22],[160,78,125,9,"select"],[160,84,125,15],[160,85,125,16],[160,88,125,19],[160,89,125,20],[160,90,126,9,"or"],[160,92,126,11],[160,93,127,10],[160,112,127,29,"user1Id"],[160,119,127,36],[160,135,127,52,"user2Id"],[160,142,127,59],[160,163,127,80,"user2Id"],[160,170,127,87],[160,186,127,103,"user1Id"],[160,193,127,110],[160,196,128,8],[160,197,128,9],[160,198,129,9,"maybeSingle"],[160,209,129,20],[160,210,129,21],[160,211,129,22],[161,12,123,20,"existingChat"],[161,24,123,32],[161,27,123,32,"_yield$supabase$from$4"],[161,49,123,32],[161,50,123,14,"data"],[161,54,123,18],[162,12,123,41,"checkError"],[162,22,123,51],[162,25,123,51,"_yield$supabase$from$4"],[162,47,123,51],[162,48,123,34,"error"],[162,53,123,39],[163,10,131,6],[163,14,131,10,"checkError"],[163,24,131,20],[163,26,131,22],[163,32,131,28,"checkError"],[163,42,131,38],[164,10,133,6],[164,14,133,10,"existingChat"],[164,26,133,22],[164,28,133,24],[165,12,134,8],[165,19,134,15,"existingChat"],[165,31,134,27],[166,10,135,6],[168,10,137,6],[169,10,138,6],[169,14,138,6,"_yield$supabase$from$5"],[169,36,138,6],[169,45,138,36,"supabase"],[169,54,138,44],[169,55,138,44,"supabase"],[169,63,138,44],[169,64,139,9,"from"],[169,68,139,13],[169,69,139,14],[169,76,139,21],[169,77,139,22],[169,78,140,9,"insert"],[169,84,140,15],[169,85,140,16],[170,14,141,10,"user1_id"],[170,22,141,18],[170,24,141,20,"user1Id"],[170,31,141,27],[171,14,142,10,"user2_id"],[171,22,142,18],[171,24,142,20,"user2Id"],[172,12,143,8],[172,13,143,9],[172,14,143,10],[172,15,144,9,"select"],[172,21,144,15],[172,22,144,16],[172,23,144,17],[172,24,145,9,"single"],[172,30,145,15],[172,31,145,16],[172,32,145,17],[173,12,138,14,"data"],[173,16,138,18],[173,19,138,18,"_yield$supabase$from$5"],[173,41,138,18],[173,42,138,14,"data"],[173,46,138,18],[174,12,138,20,"error"],[174,17,138,25],[174,20,138,25,"_yield$supabase$from$5"],[174,42,138,25],[174,43,138,20,"error"],[174,48,138,25],[175,10,147,6],[175,14,147,10,"error"],[175,19,147,15],[175,21,147,17],[175,27,147,23,"error"],[175,32,147,28],[176,10,148,6],[176,17,148,13,"data"],[176,21,148,17],[177,8,149,4],[177,9,149,5],[178,8,149,5],[178,24,121,4,"mutationFn"],[178,34,121,14,"mutationFn"],[178,35,121,14,"_x2"],[178,38,121,14],[179,10,121,14],[179,17,121,14,"_ref6"],[179,22,121,14],[179,23,121,14,"apply"],[179,28,121,14],[179,35,121,14,"arguments"],[179,44,121,14],[180,8,121,14],[181,6,121,14],[181,9,149,5],[182,6,150,4,"onSuccess"],[182,15,150,13],[182,17,150,15,"onSuccess"],[182,18,150,15],[182,23,150,21],[183,8,151,6,"queryClient"],[183,19,151,17],[183,20,151,18,"invalidateQueries"],[183,37,151,35],[183,38,151,36],[183,39,151,37],[183,46,151,44],[183,47,151,45],[183,48,151,46],[184,6,152,4],[185,4,153,2],[185,5,153,3],[185,6,153,4],[186,2,154,0],[188,2,156,0],[189,0,157,0],[190,0,158,0],[191,2,156,0,"_s4"],[191,5,156,0],[191,6,117,16,"useCreateChatMutation"],[191,27,117,37],[192,4,117,37],[192,12,118,22,"useQueryClient"],[192,31,118,36],[192,32,118,36,"useQueryClient"],[192,46,118,36],[192,48,120,9,"useMutation"],[192,67,120,20],[192,68,120,20,"useMutation"],[192,79,120,20],[193,2,120,20],[194,2,159,7],[194,11,159,16,"useMarkMessagesReadMutation"],[194,38,159,43,"useMarkMessagesReadMutation"],[194,39,159,43],[194,41,159,46],[195,4,159,46,"_s5"],[195,7,159,46],[196,4,160,2],[196,8,160,8,"queryClient"],[196,19,160,19],[196,22,160,22],[196,26,160,22,"useQueryClient"],[196,45,160,36],[196,46,160,36,"useQueryClient"],[196,60,160,36],[196,62,160,37],[196,63,160,38],[197,4,162,2],[197,11,162,9],[197,15,162,9,"useMutation"],[197,34,162,20],[197,35,162,20,"useMutation"],[197,46,162,20],[197,48,162,21],[198,6,163,4,"mutationFn"],[198,16,163,14],[199,8,163,14],[199,12,163,14,"_ref8"],[199,17,163,14],[199,24,163,14,"_asyncToGenerator"],[199,41,163,14],[199,42,163,14,"default"],[199,49,163,14],[199,51,163,16],[199,62,163,16,"_ref7"],[199,67,163,16],[199,69,163,46],[200,10,163,46],[200,14,163,25,"chatId"],[200,20,163,31],[200,23,163,31,"_ref7"],[200,28,163,31],[200,29,163,25,"chatId"],[200,35,163,31],[201,12,163,33,"userId"],[201,18,163,39],[201,21,163,39,"_ref7"],[201,26,163,39],[201,27,163,33,"userId"],[201,33,163,39],[202,10,164,6],[202,14,164,6,"_yield$supabase$from$6"],[202,36,164,6],[202,45,164,30,"supabase"],[202,54,164,38],[202,55,164,38,"supabase"],[202,63,164,38],[202,64,165,9,"from"],[202,68,165,13],[202,69,165,14],[202,79,165,24],[202,80,165,25],[202,81,166,9,"update"],[202,87,166,15],[202,88,166,16],[203,14,166,18,"is_read"],[203,21,166,25],[203,23,166,27],[204,12,166,32],[204,13,166,33],[204,14,166,34],[204,15,167,9,"eq"],[204,17,167,11],[204,18,167,12],[204,27,167,21],[204,29,167,23,"chatId"],[204,35,167,29],[204,36,167,30],[204,37,168,9,"neq"],[204,40,168,12],[204,41,168,13],[204,52,168,24],[204,54,168,26,"userId"],[204,60,168,32],[204,61,168,33],[204,62,169,9,"eq"],[204,64,169,11],[204,65,169,12],[204,74,169,21],[204,76,169,23],[204,81,169,28],[204,82,169,29],[205,12,164,14,"error"],[205,17,164,19],[205,20,164,19,"_yield$supabase$from$6"],[205,42,164,19],[205,43,164,14,"error"],[205,48,164,19],[206,10,171,6],[206,14,171,10,"error"],[206,19,171,15],[206,21,171,17],[206,27,171,23,"error"],[206,32,171,28],[207,8,172,4],[207,9,172,5],[208,8,172,5],[208,24,163,4,"mutationFn"],[208,34,163,14,"mutationFn"],[208,35,163,14,"_x3"],[208,38,163,14],[209,10,163,14],[209,17,163,14,"_ref8"],[209,22,163,14],[209,23,163,14,"apply"],[209,28,163,14],[209,35,163,14,"arguments"],[209,44,163,14],[210,8,163,14],[211,6,163,14],[211,9,172,5],[212,6,173,4,"onSuccess"],[212,15,173,13],[212,17,173,15,"onSuccess"],[212,18,173,16,"_"],[212,19,173,17],[212,21,173,19,"variables"],[212,30,173,28],[212,35,173,33],[213,8,174,6,"queryClient"],[213,19,174,17],[213,20,174,18,"invalidateQueries"],[213,37,174,35],[213,38,174,36],[213,39,174,37],[213,49,174,47],[213,51,174,49,"variables"],[213,60,174,58],[213,61,174,59,"chatId"],[213,67,174,65],[213,68,174,66],[213,69,174,67],[214,8,175,6,"queryClient"],[214,19,175,17],[214,20,175,18,"invalidateQueries"],[214,37,175,35],[214,38,175,36],[214,39,175,37],[214,46,175,44],[214,47,175,45],[214,48,175,46],[215,6,176,4],[216,4,177,2],[216,5,177,3],[216,6,177,4],[217,2,178,0],[218,2,178,1,"_s5"],[218,5,178,1],[218,6,159,16,"useMarkMessagesReadMutation"],[218,33,159,43],[219,4,159,43],[219,12,160,22,"useQueryClient"],[219,31,160,36],[219,32,160,36,"useQueryClient"],[219,46,160,36],[219,48,162,9,"useMutation"],[219,67,162,20],[219,68,162,20,"useMutation"],[219,79,162,20],[220,2,162,20],[221,0,162,20],[221,3]],"functionMap":{"names":["<global>","useChatsQuery","useQuery$argument_0.queryFn","data.map$argument_0","messages.filter$argument_0","useChatMessagesQuery","useSendMessageMutation","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useCreateChatMutation","useMarkMessagesReadMutation"],"mappings":"AAA;OCM;aCG;sBCmB;UCM,iDD;ODS;KDC;CDG;OKK;aHG;KGgB;CLG;OMK;gBCI;KDoB;eEC;KFK;CNE;OSK;gBFI;KE4B;eDC;KCE;CTE;OUK;gBHI;KGS;eFC;KEG;CVE"},"hasCjsExports":false},"type":"js/module"}]}