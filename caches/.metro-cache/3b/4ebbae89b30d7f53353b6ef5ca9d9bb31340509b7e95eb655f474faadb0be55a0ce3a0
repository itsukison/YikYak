{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}},{"name":"../supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":39,"index":84}}],"key":"zx/dTdJp0d3TJEOaa003L7FI5PE=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _supabase = require(_dependencyMap[1], \"../supabase\");\n  var _s = $RefreshSig$();\n  function useAuth() {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [session, setSession] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [profile, setProfile] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      // Get initial session\n      _supabase.supabase.auth.getSession().then(({\n        data: {\n          session\n        }\n      }) => {\n        setSession(session);\n        setUser(session?.user ?? null);\n\n        // Fetch user profile if session exists\n        if (session?.user) {\n          fetchProfile(session.user.id);\n        } else {\n          setLoading(false);\n        }\n      });\n\n      // Listen for auth changes\n      const {\n        data: {\n          subscription\n        }\n      } = _supabase.supabase.auth.onAuthStateChange(async (_event, session) => {\n        setSession(session);\n        setUser(session?.user ?? null);\n        if (session?.user) {\n          await fetchProfile(session.user.id);\n        } else {\n          setProfile(null);\n        }\n      });\n      return () => subscription.unsubscribe();\n    }, []);\n    const fetchProfile = async userId => {\n      try {\n        const {\n          data,\n          error\n        } = await _supabase.supabase.from('users').select('*').eq('id', userId).single();\n        if (error) {\n          console.error('Error fetching profile:', error);\n          // If profile doesn't exist, user might need to complete onboarding\n          setProfile(null);\n        } else {\n          setProfile(data);\n        }\n      } catch (error) {\n        console.error('Error fetching profile:', error);\n        setProfile(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const signUp = async (email, password) => {\n      try {\n        const {\n          data,\n          error\n        } = await _supabase.supabase.auth.signUp({\n          email,\n          password\n        });\n        return {\n          data,\n          error\n        };\n      } catch (error) {\n        return {\n          data: null,\n          error\n        };\n      }\n    };\n    const signIn = async (email, password) => {\n      try {\n        const {\n          data,\n          error\n        } = await _supabase.supabase.auth.signInWithPassword({\n          email,\n          password\n        });\n        return {\n          data,\n          error\n        };\n      } catch (error) {\n        return {\n          data: null,\n          error\n        };\n      }\n    };\n    const signOut = async () => {\n      try {\n        const {\n          error\n        } = await _supabase.supabase.auth.signOut();\n        setProfile(null);\n        return {\n          error\n        };\n      } catch (error) {\n        return {\n          error\n        };\n      }\n    };\n    const updateProfile = async updates => {\n      try {\n        const {\n          data,\n          error\n        } = await _supabase.supabase.from('users').update(updates).eq('id', user.id).select().single();\n        if (error) throw error;\n        setProfile(data);\n        return {\n          data,\n          error: null\n        };\n      } catch (error) {\n        return {\n          data: null,\n          error\n        };\n      }\n    };\n    return {\n      user,\n      session,\n      profile,\n      loading,\n      signUp,\n      signIn,\n      signOut,\n      updateProfile\n    };\n  }\n  _s(useAuth, \"Tux9+EmC0PbQVHOv4eyMKKJvuj0=\");\n});","lineCount":155,"map":[[6,2,1,0],[6,6,1,0,"_react"],[6,12,1,0],[6,15,1,0,"require"],[6,22,1,0],[6,23,1,0,"_dependencyMap"],[6,37,1,0],[7,2,2,0],[7,6,2,0,"_supabase"],[7,15,2,0],[7,18,2,0,"require"],[7,25,2,0],[7,26,2,0,"_dependencyMap"],[7,40,2,0],[8,2,2,39],[8,6,2,39,"_s"],[8,8,2,39],[8,11,2,39,"$RefreshSig$"],[8,23,2,39],[9,2,4,7],[9,11,4,16,"useAuth"],[9,18,4,23,"useAuth"],[9,19,4,23],[9,21,4,26],[10,4,4,26,"_s"],[10,6,4,26],[11,4,5,2],[11,10,5,8],[11,11,5,9,"user"],[11,15,5,13],[11,17,5,15,"setUser"],[11,24,5,22],[11,25,5,23],[11,28,5,26],[11,32,5,26,"useState"],[11,47,5,34],[11,49,5,35],[11,53,5,39],[11,54,5,40],[12,4,6,2],[12,10,6,8],[12,11,6,9,"session"],[12,18,6,16],[12,20,6,18,"setSession"],[12,30,6,28],[12,31,6,29],[12,34,6,32],[12,38,6,32,"useState"],[12,53,6,40],[12,55,6,41],[12,59,6,45],[12,60,6,46],[13,4,7,2],[13,10,7,8],[13,11,7,9,"loading"],[13,18,7,16],[13,20,7,18,"setLoading"],[13,30,7,28],[13,31,7,29],[13,34,7,32],[13,38,7,32,"useState"],[13,53,7,40],[13,55,7,41],[13,59,7,45],[13,60,7,46],[14,4,8,2],[14,10,8,8],[14,11,8,9,"profile"],[14,18,8,16],[14,20,8,18,"setProfile"],[14,30,8,28],[14,31,8,29],[14,34,8,32],[14,38,8,32,"useState"],[14,53,8,40],[14,55,8,41],[14,59,8,45],[14,60,8,46],[15,4,10,2],[15,8,10,2,"useEffect"],[15,24,10,11],[15,26,10,12],[15,32,10,18],[16,6,11,4],[17,6,12,4,"supabase"],[17,24,12,12],[17,25,12,13,"auth"],[17,29,12,17],[17,30,12,18,"getSession"],[17,40,12,28],[17,41,12,29],[17,42,12,30],[17,43,12,31,"then"],[17,47,12,35],[17,48,12,36],[17,49,12,37],[18,8,12,39,"data"],[18,12,12,43],[18,14,12,45],[19,10,12,47,"session"],[20,8,12,55],[21,6,12,57],[21,7,12,58],[21,12,12,63],[22,8,13,6,"setSession"],[22,18,13,16],[22,19,13,17,"session"],[22,26,13,24],[22,27,13,25],[23,8,14,6,"setUser"],[23,15,14,13],[23,16,14,14,"session"],[23,23,14,21],[23,25,14,23,"user"],[23,29,14,27],[23,33,14,31],[23,37,14,35],[23,38,14,36],[25,8,16,6],[26,8,17,6],[26,12,17,10,"session"],[26,19,17,17],[26,21,17,19,"user"],[26,25,17,23],[26,27,17,25],[27,10,18,8,"fetchProfile"],[27,22,18,20],[27,23,18,21,"session"],[27,30,18,28],[27,31,18,29,"user"],[27,35,18,33],[27,36,18,34,"id"],[27,38,18,36],[27,39,18,37],[28,8,19,6],[28,9,19,7],[28,15,19,13],[29,10,20,8,"setLoading"],[29,20,20,18],[29,21,20,19],[29,26,20,24],[29,27,20,25],[30,8,21,6],[31,6,22,4],[31,7,22,5],[31,8,22,6],[33,6,24,4],[34,6,25,4],[34,12,25,10],[35,8,25,12,"data"],[35,12,25,16],[35,14,25,18],[36,10,25,20,"subscription"],[37,8,25,33],[38,6,25,35],[38,7,25,36],[38,10,25,39,"supabase"],[38,28,25,47],[38,29,25,48,"auth"],[38,33,25,52],[38,34,25,53,"onAuthStateChange"],[38,51,25,70],[38,52,26,6],[38,59,26,13,"_event"],[38,65,26,19],[38,67,26,21,"session"],[38,74,26,28],[38,79,26,33],[39,8,27,8,"setSession"],[39,18,27,18],[39,19,27,19,"session"],[39,26,27,26],[39,27,27,27],[40,8,28,8,"setUser"],[40,15,28,15],[40,16,28,16,"session"],[40,23,28,23],[40,25,28,25,"user"],[40,29,28,29],[40,33,28,33],[40,37,28,37],[40,38,28,38],[41,8,30,8],[41,12,30,12,"session"],[41,19,30,19],[41,21,30,21,"user"],[41,25,30,25],[41,27,30,27],[42,10,31,10],[42,16,31,16,"fetchProfile"],[42,28,31,28],[42,29,31,29,"session"],[42,36,31,36],[42,37,31,37,"user"],[42,41,31,41],[42,42,31,42,"id"],[42,44,31,44],[42,45,31,45],[43,8,32,8],[43,9,32,9],[43,15,32,15],[44,10,33,10,"setProfile"],[44,20,33,20],[44,21,33,21],[44,25,33,25],[44,26,33,26],[45,8,34,8],[46,6,35,6],[46,7,36,4],[46,8,36,5],[47,6,38,4],[47,13,38,11],[47,19,38,17,"subscription"],[47,31,38,29],[47,32,38,30,"unsubscribe"],[47,43,38,41],[47,44,38,42],[47,45,38,43],[48,4,39,2],[48,5,39,3],[48,7,39,5],[48,9,39,7],[48,10,39,8],[49,4,41,2],[49,10,41,8,"fetchProfile"],[49,22,41,20],[49,25,41,23],[49,31,41,30,"userId"],[49,37,41,36],[49,41,41,41],[50,6,42,4],[50,10,42,8],[51,8,43,6],[51,14,43,12],[52,10,43,14,"data"],[52,14,43,18],[53,10,43,20,"error"],[54,8,43,26],[54,9,43,27],[54,12,43,30],[54,18,43,36,"supabase"],[54,36,43,44],[54,37,44,9,"from"],[54,41,44,13],[54,42,44,14],[54,49,44,21],[54,50,44,22],[54,51,45,9,"select"],[54,57,45,15],[54,58,45,16],[54,61,45,19],[54,62,45,20],[54,63,46,9,"eq"],[54,65,46,11],[54,66,46,12],[54,70,46,16],[54,72,46,18,"userId"],[54,78,46,24],[54,79,46,25],[54,80,47,9,"single"],[54,86,47,15],[54,87,47,16],[54,88,47,17],[55,8,49,6],[55,12,49,10,"error"],[55,17,49,15],[55,19,49,17],[56,10,50,8,"console"],[56,17,50,15],[56,18,50,16,"error"],[56,23,50,21],[56,24,50,22],[56,49,50,47],[56,51,50,49,"error"],[56,56,50,54],[56,57,50,55],[57,10,51,8],[58,10,52,8,"setProfile"],[58,20,52,18],[58,21,52,19],[58,25,52,23],[58,26,52,24],[59,8,53,6],[59,9,53,7],[59,15,53,13],[60,10,54,8,"setProfile"],[60,20,54,18],[60,21,54,19,"data"],[60,25,54,23],[60,26,54,24],[61,8,55,6],[62,6,56,4],[62,7,56,5],[62,8,56,6],[62,15,56,13,"error"],[62,20,56,18],[62,22,56,20],[63,8,57,6,"console"],[63,15,57,13],[63,16,57,14,"error"],[63,21,57,19],[63,22,57,20],[63,47,57,45],[63,49,57,47,"error"],[63,54,57,52],[63,55,57,53],[64,8,58,6,"setProfile"],[64,18,58,16],[64,19,58,17],[64,23,58,21],[64,24,58,22],[65,6,59,4],[65,7,59,5],[65,16,59,14],[66,8,60,6,"setLoading"],[66,18,60,16],[66,19,60,17],[66,24,60,22],[66,25,60,23],[67,6,61,4],[68,4,62,2],[68,5,62,3],[69,4,64,2],[69,10,64,8,"signUp"],[69,16,64,14],[69,19,64,17],[69,25,64,17,"signUp"],[69,26,64,24,"email"],[69,31,64,29],[69,33,64,31,"password"],[69,41,64,39],[69,46,64,44],[70,6,65,4],[70,10,65,8],[71,8,66,6],[71,14,66,12],[72,10,66,14,"data"],[72,14,66,18],[73,10,66,20,"error"],[74,8,66,26],[74,9,66,27],[74,12,66,30],[74,18,66,36,"supabase"],[74,36,66,44],[74,37,66,45,"auth"],[74,41,66,49],[74,42,66,50,"signUp"],[74,48,66,56],[74,49,66,57],[75,10,67,8,"email"],[75,15,67,13],[76,10,68,8,"password"],[77,8,69,6],[77,9,69,7],[77,10,69,8],[78,8,70,6],[78,15,70,13],[79,10,70,15,"data"],[79,14,70,19],[80,10,70,21,"error"],[81,8,70,27],[81,9,70,28],[82,6,71,4],[82,7,71,5],[82,8,71,6],[82,15,71,13,"error"],[82,20,71,18],[82,22,71,20],[83,8,72,6],[83,15,72,13],[84,10,72,15,"data"],[84,14,72,19],[84,16,72,21],[84,20,72,25],[85,10,72,27,"error"],[86,8,72,33],[86,9,72,34],[87,6,73,4],[88,4,74,2],[88,5,74,3],[89,4,76,2],[89,10,76,8,"signIn"],[89,16,76,14],[89,19,76,17],[89,25,76,17,"signIn"],[89,26,76,24,"email"],[89,31,76,29],[89,33,76,31,"password"],[89,41,76,39],[89,46,76,44],[90,6,77,4],[90,10,77,8],[91,8,78,6],[91,14,78,12],[92,10,78,14,"data"],[92,14,78,18],[93,10,78,20,"error"],[94,8,78,26],[94,9,78,27],[94,12,78,30],[94,18,78,36,"supabase"],[94,36,78,44],[94,37,78,45,"auth"],[94,41,78,49],[94,42,78,50,"signInWithPassword"],[94,60,78,68],[94,61,78,69],[95,10,79,8,"email"],[95,15,79,13],[96,10,80,8,"password"],[97,8,81,6],[97,9,81,7],[97,10,81,8],[98,8,82,6],[98,15,82,13],[99,10,82,15,"data"],[99,14,82,19],[100,10,82,21,"error"],[101,8,82,27],[101,9,82,28],[102,6,83,4],[102,7,83,5],[102,8,83,6],[102,15,83,13,"error"],[102,20,83,18],[102,22,83,20],[103,8,84,6],[103,15,84,13],[104,10,84,15,"data"],[104,14,84,19],[104,16,84,21],[104,20,84,25],[105,10,84,27,"error"],[106,8,84,33],[106,9,84,34],[107,6,85,4],[108,4,86,2],[108,5,86,3],[109,4,88,2],[109,10,88,8,"signOut"],[109,17,88,15],[109,20,88,18],[109,26,88,18,"signOut"],[109,27,88,18],[109,32,88,30],[110,6,89,4],[110,10,89,8],[111,8,90,6],[111,14,90,12],[112,10,90,14,"error"],[113,8,90,20],[113,9,90,21],[113,12,90,24],[113,18,90,30,"supabase"],[113,36,90,38],[113,37,90,39,"auth"],[113,41,90,43],[113,42,90,44,"signOut"],[113,49,90,51],[113,50,90,52],[113,51,90,53],[114,8,91,6,"setProfile"],[114,18,91,16],[114,19,91,17],[114,23,91,21],[114,24,91,22],[115,8,92,6],[115,15,92,13],[116,10,92,15,"error"],[117,8,92,21],[117,9,92,22],[118,6,93,4],[118,7,93,5],[118,8,93,6],[118,15,93,13,"error"],[118,20,93,18],[118,22,93,20],[119,8,94,6],[119,15,94,13],[120,10,94,15,"error"],[121,8,94,21],[121,9,94,22],[122,6,95,4],[123,4,96,2],[123,5,96,3],[124,4,98,2],[124,10,98,8,"updateProfile"],[124,23,98,21],[124,26,98,24],[124,32,98,31,"updates"],[124,39,98,38],[124,43,98,43],[125,6,99,4],[125,10,99,8],[126,8,100,6],[126,14,100,12],[127,10,100,14,"data"],[127,14,100,18],[128,10,100,20,"error"],[129,8,100,26],[129,9,100,27],[129,12,100,30],[129,18,100,36,"supabase"],[129,36,100,44],[129,37,101,9,"from"],[129,41,101,13],[129,42,101,14],[129,49,101,21],[129,50,101,22],[129,51,102,9,"update"],[129,57,102,15],[129,58,102,16,"updates"],[129,65,102,23],[129,66,102,24],[129,67,103,9,"eq"],[129,69,103,11],[129,70,103,12],[129,74,103,16],[129,76,103,18,"user"],[129,80,103,22],[129,81,103,23,"id"],[129,83,103,25],[129,84,103,26],[129,85,104,9,"select"],[129,91,104,15],[129,92,104,16],[129,93,104,17],[129,94,105,9,"single"],[129,100,105,15],[129,101,105,16],[129,102,105,17],[130,8,107,6],[130,12,107,10,"error"],[130,17,107,15],[130,19,107,17],[130,25,107,23,"error"],[130,30,107,28],[131,8,108,6,"setProfile"],[131,18,108,16],[131,19,108,17,"data"],[131,23,108,21],[131,24,108,22],[132,8,109,6],[132,15,109,13],[133,10,109,15,"data"],[133,14,109,19],[134,10,109,21,"error"],[134,15,109,26],[134,17,109,28],[135,8,109,33],[135,9,109,34],[136,6,110,4],[136,7,110,5],[136,8,110,6],[136,15,110,13,"error"],[136,20,110,18],[136,22,110,20],[137,8,111,6],[137,15,111,13],[138,10,111,15,"data"],[138,14,111,19],[138,16,111,21],[138,20,111,25],[139,10,111,27,"error"],[140,8,111,33],[140,9,111,34],[141,6,112,4],[142,4,113,2],[142,5,113,3],[143,4,115,2],[143,11,115,9],[144,6,116,4,"user"],[144,10,116,8],[145,6,117,4,"session"],[145,13,117,11],[146,6,118,4,"profile"],[146,13,118,11],[147,6,119,4,"loading"],[147,13,119,11],[148,6,120,4,"signUp"],[148,12,120,10],[149,6,121,4,"signIn"],[149,12,121,10],[150,6,122,4,"signOut"],[150,13,122,11],[151,6,123,4,"updateProfile"],[152,4,124,2],[152,5,124,3],[153,2,125,0],[154,2,125,1,"_s"],[154,4,125,1],[154,5,4,16,"useAuth"],[154,12,4,23],[155,0,4,23],[155,3]],"functionMap":{"names":["<global>","useAuth","useEffect$argument_0","supabase.auth.getSession.then$argument_0","supabase.auth.onAuthStateChange$argument_0","<anonymous>","fetchProfile","signUp","signIn","signOut","updateProfile"],"mappings":"AAA;OCG;YCM;oCCE;KDU;MEI;OFS;WGG,gCH;GDC;uBKE;GLqB;iBME;GNU;iBOE;GPU;kBQE;GRQ;wBSE;GTe;CDY"}},"type":"js/module"}]}